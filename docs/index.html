<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OSINT Armed Attacks Map</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">

  <style>
    html, body { height: 100%; margin: 0; font-family: system-ui, Arial; }

    header{
      height: 110px;
      padding: 10px 12px;
      border-bottom: 1px solid #ddd;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      box-sizing:border-box;
      gap:12px;
    }
    .left{ display:flex; flex-direction:column; gap:4px; }
    .title{ font-size:18px; font-weight:800; line-height:1.1; }
    .subtitle{ font-size:12px; opacity:.8; }

    .right{
      display:flex;
      align-items:center;
      gap:10px;
      font-size:14px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    select{ padding:6px 8px; font-size:14px; }

    #status{
      padding: 8px 12px;
      font-size: 13px;
      border-bottom: 1px solid #eee;
      background: #fafafa;
    }
    #status.ok{ color:#0a7a2f; }
    #status.err{ color:#b00020; }

    #content{
      height: calc(100% - 110px - 41px);
      display:flex;
      min-height: 0;
    }
    #map{
      flex: 1 1 auto;
      min-width: 0;
      background:#f3f3f3;
    }
    #panel{
      width: 340px;
      border-left: 1px solid #e6e6e6;
      background: #fff;
      padding: 12px;
      box-sizing: border-box;
      overflow: auto;
    }
    .panel-title{
      font-weight: 800;
      margin: 0 0 8px 0;
      font-size: 14px;
    }
    .small{
      font-size: 12px;
      opacity: .75;
      line-height: 1.35;
      margin: 0 0 12px 0;
    }
    .stat{
      display:flex;
      justify-content:space-between;
      gap:12px;
      font-size: 13px;
      margin: 6px 0;
    }
    .divider{
      height:1px;
      background:#eee;
      margin: 12px 0;
    }

    @media (max-width: 900px){
      #panel{ display:none; }
      header{ height: 140px; }
      #content{ height: calc(100% - 140px - 41px); }
    }
  </style>
</head>
<body>

<header>
  <div class="left">
    <div class="title">OSINT fegyveres incidensek térképe</div>
    <div class="subtitle">2025: Q1–Q4 • 2026: LIVE / Részletes • régió + típus statisztika</div>
  </div>

  <div class="right">
    <label>Év:</label>
    <select id="yearSelect">
      <option value="2025" selected>2025</option>
      <option value="2026">2026</option>
    </select>

    <label id="quarterLabel">Negyedév:</label>
    <select id="quarterSelect">
      <option value="Q1">Q1</option>
      <option value="Q2">Q2</option>
      <option value="Q3">Q3</option>
      <option value="Q4" selected>Q4</option>
    </select>

    <label id="viewLabel" style="display:none;">Nézet:</label>
    <select id="viewSelect" style="display:none;">
      <option value="live" selected>LIVE</option>
      <option value="raw">Részletes</option>
    </select>

    <label>Régió:</label>
    <select id="regionSelect">
      <option value="global" selected>Világ</option>
      <option value="europe">Európa</option>
      <option value="eastern_europe">Kelet-Európa</option>
      <option value="balkans">Balkán</option>
      <option value="middle_east">Közel-Kelet</option>
      <option value="north_africa">Észak-Afrika</option>
      <option value="sub_saharan_africa">Szubszaharai Afrika</option>
      <option value="north_america">Észak-Amerika</option>
      <option value="latin_america">Latin-Amerika</option>
      <option value="asia">Ázsia</option>
      <option value="south_asia">Dél-Ázsia</option>
      <option value="east_asia">Kelet-Ázsia</option>
      <option value="oceania">Óceánia</option>
    </select>
  </div>
</header>

<div id="status">Betöltés…</div>

<div id="content">
  <div id="map"></div>

  <aside id="panel">
    <div class="panel-title">Statisztika</div>
    <div class="stat"><span>Nézet</span><span id="statScope">-</span></div>
    <div class="stat"><span>Régió</span><span id="statRegion">-</span></div>
    <div class="stat"><span>Pontok</span><span id="statPoints">-</span></div>

    <div class="divider"></div>

    <div class="panel-title">Támadás típus</div>
    <canvas id="typeChart" width="320" height="220"></canvas>
  </aside>
</div>

<script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<script>
const REGIONS = {
  global:null,

  europe:{latMin:35, latMax:72, lonMin:-25, lonMax:45},

  eastern_europe:{latMin:44, latMax:65, lonMin:20, lonMax:60},

  balkans:{latMin:37, latMax:48, lonMin:13, lonMax:30},

  middle_east:{latMin:12, latMax:42, lonMin:25, lonMax:70},
  north_africa:{latMin:15, latMax:37, lonMin:-20, lonMax:40},
  sub_saharan_africa:{latMin:-35, latMax:15, lonMin:-20, lonMax:55},

  north_america:{latMin:7, latMax:75, lonMin:-170, lonMax:-50},
  latin_america:{latMin:-60, latMax:33, lonMin:-120, lonMax:-30},

  asia:{latMin:5, latMax:80, lonMin:45, lonMax:180},
  south_asia:{latMin:5, latMax:35, lonMin:60, lonMax:100},
  east_asia:{latMin:18, latMax:55, lonMin:100, lonMax:150},

  oceania:{latMin:-50, latMax:5, lonMin:110, lonMax:180},
};
</script>

<script>
/* a JS többi része NEM változott – a régiók automatikusan működnek */
</script>

</body>
</html>
